AC_INIT(syslogd.h)
AC_CONFIG_HEADER(config.h)

test -z "$CFLAGS" && CFLAGS=-O AC_SUBST(CFLAGS)
test -z "$LDFLAGS" && LDFLAGS=-s AC_SUBST(LDFLAGS)

AC_PROG_CC
AC_PROG_INSTALL

AC_CHECK_FUNC(MD5Init, AC_DEFINE(HAVE_MD5),
	EXTRAOBJ="$EXTRAOBJ md5.o")

AC_CHECK_FUNC(SHA1Init, AC_DEFINE(HAVE_SHA1),
	EXTRAOBJ="$EXTRAOBJ sha1.o")

AC_CHECK_FUNC(RMD160Init, AC_DEFINE(HAVE_RMD160),
	EXTRAOBJ="$EXTRAOBJ rmd160.o")

AC_SUBST(EXTRASRC)
AC_SUBST(EXTRAOBJ)

for dir in "/var/run" "/etc"
do
	if test -d $dir
	then
		break
	fi
done

AC_MSG_RESULT(root-mode pid file will go in $dir)
AC_DEFINE_UNQUOTED(PID_DIR, "$dir")

AC_OUTPUT(Makefile)
